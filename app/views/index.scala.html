@(articles:List[Article])(implicit loggedUser: Option[User], messages: Messages, lang: play.api.i18n.Lang)


@import views.html.tags.auth._
@import controllers.routes
@import repositories.LikeRepository
@import repositories.ArticleRepository

@views.html.templates.default(title = "Home", loggedUser, tab = "index") {

	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" media="screen" href="@routes.MyAssets.lib("clean-blog/css/clean-blog.min.css")">
		<script data-main="@routes.MyAssets.js("main")" src="@routes.MyAssets.lib("clean-blog/js/clean-blog.min.js")" type="text/javascript"></script>
		<script data-main="@routes.MyAssets.js("main")" src="@routes.MyAssets.js("index.js")" type="text/javascript"></script>



	</head>

	<body>
		<div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
			@for(article <- articles){
			<div class="post-preview">
				<a href= "/article/id/@article.id">
					<h2 class="post-title">
						@article.title
					</h2>
					<h3 class="post-subtitle">
						@article.content
					</h3>
				</a>
				<p class="post-meta">Posted by
					<a ></a> on @article.creationDate.toString("dd MMM yyyy", lang.toLocale) - @article.readingTime mn read -
					<a href="#">@article.tag1</a>
				</p>
				<p>
					@loggedUser match {
						case Some(user:models.User) => {
							@if(LikeRepository.hasLiked(user.id.get,article.id.get)){
									<a id="like-auth" href="#"><i class="fa fa-heart"></i>)</a>

							}else{
									<a id="like-auth" href="#"><i class="fa fa-heart-o"></i></a>
							}

						}
						case None => {
							<a href="/login"><i id="like-unauth" class="fa fa-heart"></i></a>
						}
					}
					<span>@ArticleRepository.getLikes(article.id.get)</span>
					  <i class="fa fa-comments pull-right"></i>
				</p>
			</div>
			}
		</div>
		<hr>
	</body>





}
	